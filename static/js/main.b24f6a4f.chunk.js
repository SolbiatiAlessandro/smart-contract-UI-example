(this["webpackJsonphello-world-part-four"]=this["webpackJsonphello-world-part-four"]||[]).push([[0],{227:function(t,e,n){},246:function(t,e){},248:function(t,e){},251:function(t,e){},255:function(t,e){},256:function(t,e){},283:function(t,e){},285:function(t,e){},299:function(t,e){},301:function(t,e){},316:function(t,e){},333:function(t,e){},335:function(t,e){},353:function(t,e){},354:function(t,e){},424:function(t,e){},426:function(t,e){},432:function(t,e){},444:function(t,e){},447:function(t,e){},452:function(t,e){},537:function(t){t.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"initMessage","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"oldStr","type":"string"},{"indexed":false,"internalType":"string","name":"newStr","type":"string"}],"name":"UpdatedMessages","type":"event"},{"inputs":[],"name":"message","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"newMessage","type":"string"}],"name":"update","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},538:function(t,e,n){},539:function(t,e,n){"use strict";n.r(e);var r=n(23),a=n.n(r),s=n(208),c=n.n(s),u=(n(227),n(14)),i=n.n(u),o=n(32),d=n(64),p=n(11);n(230).config();var h=n(540).createAlchemyWeb3;console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALCHEMY_KEY:"wss://eth-ropsten.alchemyapi.io/v2/fK7smLhG3-R-HPDzuL-qkb94Bu79CNVq"}));var l=h("wss://eth-ropsten.alchemyapi.io/v2/fK7smLhG3-R-HPDzuL-qkb94Bu79CNVq"),f=n(537),b="0xE77328ee4B34f3cd7FaF39dD5dEc3537869e0BB9",m=new l.eth.Contract(f,b),j=function(){var t=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.methods.message().call();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.ethereum){t.next=14;break}return t.prev=1,t.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:return e=t.sent,n={status:"write message in text-field",address:e[0]},t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(1),{status:t.t0.message,address:""};case 12:t.next=15;break;case 14:return t.abrupt("return",{status:"metamask not connected",address:""});case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(o.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.ethereum){t.next=14;break}return t.prev=1,t.next=4,window.ethereum.request({method:"eth_accounts"});case 4:return e=t.sent,n={status:"write message in text-field",address:e[0]},t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(1),{status:t.t0.message,address:""};case 12:t.next=15;break;case 14:return t.abrupt("return",{status:"metamask not connected",address:""});case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(o.a)(i.a.mark((function t(e,n){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.ethereum&&null!==e){t.next=2;break}return t.abrupt("return",{status:"\ud83d\udca1 Connect your MetaMask wallet to update the message on the blockchain."});case 2:if(""!==n.trim()){t.next=4;break}return t.abrupt("return",{status:"\u274c Your message cannot be an empty string."});case 4:return r={to:b,from:e,data:m.methods.update(n).encodeABI()},t.prev=5,t.next=8,window.ethereum.request({method:"eth_sendTransaction",params:[r]});case 8:return a=t.sent,t.abrupt("return",{status:Object(p.jsxs)("span",{children:["\u2705"," ",Object(p.jsx)("a",{target:"_blank",href:"https://ropsten.etherscan.io/tx/".concat(a),children:"https://ropsten.etherscan.io/tx/".concat(a)}),Object(p.jsx)("br",{}),Object(p.jsx)("p",{children:"Waiting for transaction to be mined"})]})});case 12:return t.prev=12,t.t0=t.catch(5),t.abrupt("return",{status:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}(),O=function(){var t=Object(r.useState)(""),e=Object(d.a)(t,2),n=e[0],a=e[1],s=Object(r.useState)(""),c=Object(d.a)(s,2),u=c[0],h=c[1],l=Object(r.useState)("No connection to the network."),f=Object(d.a)(l,2),O=f[0],v=f[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),C=k[0],S=k[1];function T(){window.ethereum?window.ethereum.on("accountsChanged",(function(t){t.length>0?(a(t[0]),h("\ud83d\udc46\ud83c\udffd Write a message in the text-field above.")):(a(""),h("\ud83e\udd8a Connect to Metamask using the top right button."))})):h(Object(p.jsxs)("p",{children:[" ","\ud83e\udd8a"," ",Object(p.jsx)("a",{target:"_blank",href:"https://metamask.io/download.html",children:"You must install Metamask, a virtual Ethereum wallet, in your browser."})]}))}Object(r.useEffect)(Object(o.a)(i.a.mark((function t(){var e,n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:return e=t.sent,v(e),m.events.UpdatedMessages({},(function(t,e){t?h(t.message):(v(e.returnValues[1]),S(""),h("Message was updated"))})),t.next=7,x();case 7:n=t.sent,r=n.address,s=n.status,a(r),h(s),T();case 13:case"end":return t.stop()}}),t)}))),[]);var E=function(){var t=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:e=t.sent,console.log(e),h(e.status),a(e.address);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,C);case 2:e=t.sent,h(e.status);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)("div",{id:"container",children:[Object(p.jsx)("h2",{children:"What is this?"}),Object(p.jsxs)("p",{children:["This is a UI to edit the smart contract ",b," "]}),Object(p.jsxs)("p",{children:['Click on "connect wallet" to link your metamask (your ethereum account with which you sign transaction and you pay gas fees). The UI will call the smart contracts methods for you, for instance ',Object(p.jsx)("i",{children:"HelloWorldContract.update(message)"})," using the web3.js APIs"]}),Object(p.jsx)("a",{href:"https://ropsten.etherscan.io/address/0xE77328ee4B34f3cd7FaF39dD5dEc3537869e0BB9#code",children:"View smart contract on etherscan at https://ropsten.etherscan.io/address/0xE77328ee4B34f3cd7FaF39dD5dEc3537869e0BB9#code"}),Object(p.jsx)("button",{id:"walletButton",onClick:E,children:n&&n.length>0?"Connected: "+String(n).substring(0,6)+"..."+String(n).substring(38):Object(p.jsx)("span",{children:"Connect Wallet"})}),Object(p.jsxs)("h2",{style:{paddingTop:"50px"},children:["Content of ",Object(p.jsx)("i",{children:"string public message"})," on the smart contract:"]}),Object(p.jsx)("p",{children:O}),Object(p.jsx)("h2",{style:{paddingTop:"18px"},children:"New Message:"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"text",placeholder:"Update the message in your smart contract.",onChange:function(t){return S(t.target.value)},value:C}),Object(p.jsx)("p",{id:"status",children:u}),Object(p.jsxs)("button",{id:"publish",onClick:_,children:["Call ",Object(p.jsx)("i",{children:"function update(string memory newMessage)"})," on the smart contract"]})]})]})};n(538);var v=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(O,{})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,544)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),s(t),c(t)}))};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),y()}},[[539,1,2]]]);
//# sourceMappingURL=main.b24f6a4f.chunk.js.map